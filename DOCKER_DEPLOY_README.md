# Docker å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ğŸ¯ ç›®æ ‡
ä½¿ç”¨ Docker å°† Giving åº”ç”¨ä¸€é”®éƒ¨ç½²åˆ°è…¾è®¯äº‘ï¼Œæ— éœ€ä¸Šä¼ ä»£ç åˆ° GitHub

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### 1. æœåŠ¡å™¨å‡†å¤‡
```bash
# è¿æ¥è…¾è®¯äº‘æœåŠ¡å™¨
ssh root@203.195.208.202

# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y
```

### 2. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶
```bash
# æœ¬åœ°é¡¹ç›®ç›®å½•
cd /Users/chentong/Documents/giving

# æ‰“åŒ…é¡¹ç›®ï¼ˆåŒ…å«æ‰€æœ‰ Docker æ–‡ä»¶ï¼‰
tar -czf giving-docker.tar.gz .

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp giving-docker.tar.gz root@203.195.208.202:/root/
```

### 3. æœåŠ¡å™¨éƒ¨ç½²
```bash
# è§£å‹é¡¹ç›®
cd /root
tar -xzf giving-docker.tar.gz
cd giving

# è¿è¡Œéƒ¨ç½²è„šæœ¬
chmod +x docker-deploy.sh
./docker-deploy.sh
```

### 4. éªŒè¯éƒ¨ç½²
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
/opt/giving/manage.sh status

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
/opt/giving/manage.sh logs
```

## ğŸŒ è®¿é—®ç½‘ç«™

éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- **æœåŠ¡å™¨IP**ï¼šhttp://203.195.208.202
- **åŸŸå**ï¼šhttp://peacechurch.cn ï¼ˆé…ç½®DNSåï¼‰

## ğŸ› ï¸ æ—¥å¸¸ç®¡ç†

```bash
# å¯åŠ¨æœåŠ¡
/opt/giving/manage.sh start

# åœæ­¢æœåŠ¡
/opt/giving/manage.sh stop

# é‡å¯æœåŠ¡
/opt/giving/manage.sh restart

# æŸ¥çœ‹æ—¥å¿—
/opt/giving/manage.sh logs

# å¤‡ä»½æ•°æ®
/opt/giving/manage.sh backup

# æ›´æ–°åº”ç”¨ï¼ˆä¸Šä¼ æ–°ä»£ç åï¼‰
/opt/giving/manage.sh update
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
/opt/giving/
â”œâ”€â”€ docker-compose.yml    # å®¹å™¨ç¼–æ’é…ç½®
â”œâ”€â”€ Dockerfile           # åº”ç”¨å®¹å™¨æ„å»º
â”œâ”€â”€ nginx.conf           # Nginx é…ç½®
â”œâ”€â”€ manage.sh            # ç®¡ç†è„šæœ¬
â”œâ”€â”€ backup.sh            # å¤‡ä»½è„šæœ¬
â”œâ”€â”€ data/                # æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ backups/             # å¤‡ä»½æ–‡ä»¶
â””â”€â”€ ssl/                 # SSLè¯ä¹¦ï¼ˆå¯é€‰ï¼‰
```

## ğŸ” æ•…éšœæ’é™¤

### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose logs giving-app

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 3000
```

### ç½‘ç«™æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥ Nginx çŠ¶æ€
systemctl status nginx

# æ£€æŸ¥é˜²ç«å¢™
ufw status

# æµ‹è¯•æœ¬åœ°è®¿é—®
curl http://localhost
```

### æ•°æ®ä¸¢å¤±é—®é¢˜
- æ•°æ®åº“æ–‡ä»¶å­˜å‚¨åœ¨ `/opt/giving/data/`
- è‡ªåŠ¨å¤‡ä»½åœ¨ `/opt/giving/backups/`
- å®¹å™¨é‡å¯ä¸ä¼šä¸¢å¤±æ•°æ®

## ğŸ’° è´¹ç”¨è¯´æ˜

- **æœåŠ¡å™¨**ï¼šÂ¥60-100/æœˆï¼ˆ2æ ¸4Gï¼‰
- **Docker**ï¼šå…è´¹
- **åŸŸå**ï¼šå·²æœ‰ peacechurch.cn
- **å¤‡ä»½**ï¼šè‡ªåŠ¨æœ¬åœ°å¤‡ä»½

## ğŸš€ ä¼˜åŠ¿æ€»ç»“

| ç‰¹æ€§ | Docker éƒ¨ç½² | ä¼ ç»Ÿéƒ¨ç½² |
|------|------------|----------|
| ä»£ç å®‰å…¨ | âœ… æœ¬åœ°ä¿å­˜ | âŒ éœ€è¦ä¸Šä¼ GitHub |
| éƒ¨ç½²é€Ÿåº¦ | âœ… å‡ åˆ†é’Ÿ | â³ è¾ƒæ…¢ |
| ç¯å¢ƒä¸€è‡´æ€§ | âœ… å®Œå…¨ä¸€è‡´ | âŒ å¯èƒ½æœ‰å·®å¼‚ |
| ç»´æŠ¤ä¾¿åˆ©æ€§ | âœ… ä¸€é”®æ›´æ–° | â³ éœ€è¦æ‰‹åŠ¨æ“ä½œ |
| æ‰©å±•æ€§ | âœ… å®¹æ˜“æ‰©å±• | â³ è¾ƒå¤æ‚ |

ä½¿ç”¨ Docker éƒ¨ç½²ï¼Œä½ å¯ä»¥å¿«é€Ÿã€å®‰å…¨åœ°å°†åº”ç”¨éƒ¨ç½²åˆ°è…¾è®¯äº‘ï¼ğŸ‰