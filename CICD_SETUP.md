# ğŸš€ CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²æŒ‡å—

## ğŸ¯ ç›®æ ‡
å®ç°ä»£ç æ¨é€è‡ªåŠ¨è§¦å‘éƒ¨ç½²çš„å®Œæ•´ CI/CD æµç¨‹

## ğŸ“‹ éƒ¨ç½²æµç¨‹

```
ä»£ç æ¨é€ â†’ GitHub Actions â†’ æ„å»ºé•œåƒ â†’ æ¨é€åˆ°è…¾è®¯äº‘ â†’ è‡ªåŠ¨éƒ¨ç½²
    â†“            â†“            â†“            â†“            â†“
  Git æäº¤    è‡ªåŠ¨è§¦å‘      Docker æ„å»º   é•œåƒä»“åº“     æœåŠ¡å™¨æ›´æ–°
```

## ğŸ”§ é…ç½®æ­¥éª¤

### æ­¥éª¤1ï¼šåˆ›å»ºè…¾è®¯äº‘å®¹å™¨é•œåƒæœåŠ¡

1. **è®¿é—®è…¾è®¯äº‘å®¹å™¨é•œåƒæœåŠ¡**ï¼šhttps://console.cloud.tencent.com/tcr
2. **åˆ›å»ºå®ä¾‹**ï¼š
   - å®ä¾‹åç§°ï¼š`giving-app`
   - åœ°åŸŸï¼šé€‰æ‹©å¹¿å·æˆ–åŒ—äº¬
   - å®ä¾‹è§„æ ¼ï¼šåŸºç¡€ç‰ˆ
3. **åˆ›å»ºå‘½åç©ºé—´**ï¼š
   - å‘½åç©ºé—´ï¼š`giving-app`
4. **åˆ›å»ºé•œåƒä»“åº“**ï¼š
   - ä»“åº“åç§°ï¼š`thanksgiving-giving`
   - æè¿°ï¼šæ„Ÿæ©èŠ‚æ´»åŠ¨ç½‘ç«™

### æ­¥éª¤2ï¼šè·å–è…¾è®¯äº‘è®¿é—®å‡­æ®

1. **åˆ›å»ºè®¿é—®å‡­æ®**ï¼š
   - è¿›å…¥å®¹å™¨é•œåƒæœåŠ¡æ§åˆ¶å°
   - ç‚¹å‡»"è®¿é—®å‡­æ®"
   - åˆ›å»ºæ–°çš„è®¿é—®å‡­æ®
   - è®°å½•ç”¨æˆ·åå’Œå¯†ç 

2. **æŸ¥çœ‹å®ä¾‹åœ°å€**ï¼š
   - å®ä¾‹åœ°å€æ ¼å¼ï¼š`ccr.ccs.tencentyun.com`

### æ­¥éª¤3ï¼šé…ç½® GitHub Secrets

åœ¨ GitHub ä»“åº“ä¸­æ·»åŠ ä»¥ä¸‹ Secretsï¼š

1. **è®¿é—® GitHub Secrets è®¾ç½®**ï¼š
   - è¿›å…¥ä»“åº“ Settings â†’ Secrets and variables â†’ Actions
   - ç‚¹å‡» "New repository secret"

2. **æ·»åŠ ä»¥ä¸‹ Secrets**ï¼š

| Secret åç§° | å€¼ | è¯´æ˜ |
|-------------|----|------|
| `TENCENT_CLOUD_USERNAME` | è…¾è®¯äº‘ç”¨æˆ·å | å®¹å™¨é•œåƒæœåŠ¡ç”¨æˆ·å |
| `TENCENT_CLOUD_PASSWORD` | è…¾è®¯äº‘å¯†ç  | å®¹å™¨é•œåƒæœåŠ¡å¯†ç  |
| `SERVER_HOST` | `203.195.208.202` | æœåŠ¡å™¨å…¬ç½‘IP |
| `SERVER_USERNAME` | `root` | æœåŠ¡å™¨ç”¨æˆ·å |
| `SERVER_SSH_KEY` | SSHç§é’¥å†…å®¹ | ç”¨äºSSHè¿æ¥çš„ç§é’¥ |
| `SERVER_PORT` | `22` | SSHç«¯å£ï¼ˆå¯é€‰ï¼‰ |

#### ğŸ” ç”Ÿæˆ SSH å¯†é’¥å¯¹

```bash
# åœ¨æœ¬åœ°ç”Ÿæˆ SSH å¯†é’¥å¯¹
ssh-keygen -t rsa -b 4096 -C "github-actions@github.com"

# æŸ¥çœ‹å…¬é’¥ï¼ˆæ·»åŠ åˆ°æœåŠ¡å™¨ï¼‰
cat ~/.ssh/id_rsa.pub

# æŸ¥çœ‹ç§é’¥ï¼ˆæ·»åŠ åˆ° GitHub Secretsï¼‰
cat ~/.ssh/id_rsa
```

#### ğŸ“ æ·»åŠ  SSH å…¬é’¥åˆ°æœåŠ¡å™¨

```bash
# åœ¨è…¾è®¯äº‘æœåŠ¡å™¨ä¸Š
echo "ä½ çš„SSHå…¬é’¥å†…å®¹" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
```

### æ­¥éª¤4ï¼šæ¨é€ä»£ç è§¦å‘éƒ¨ç½²

```bash
# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤æ›´æ”¹
git commit -m "Add CI/CD pipeline for automated deployment"

# æ¨é€åˆ° GitHubï¼ˆä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²ï¼‰
git push origin main
```

## ğŸ“Š CI/CD å·¥ä½œæµè¯¦è§£

### è§¦å‘æ¡ä»¶
- âœ… **æ¨é€** åˆ° `main` åˆ†æ”¯
- âœ… **Pull Request** åˆ° `main` åˆ†æ”¯

### æ„å»ºæ­¥éª¤
1. **ä»£ç æ£€å‡º** - è·å–æœ€æ–°ä»£ç 
2. **Docker æ„å»º** - æ„å»ºåº”ç”¨é•œåƒ
3. **æ¨é€åˆ°è…¾è®¯äº‘** - ä¸Šä¼ é•œåƒåˆ°å®¹å™¨æœåŠ¡
4. **è‡ªåŠ¨éƒ¨ç½²** - SSHè¿æ¥æœåŠ¡å™¨æ›´æ–°æœåŠ¡

### éƒ¨ç½²ç­–ç•¥
- **æ»šåŠ¨æ›´æ–°** - åœæ­¢æ—§æœåŠ¡ï¼Œå¯åŠ¨æ–°æœåŠ¡
- **å¥åº·æ£€æŸ¥** - ç¡®ä¿æ–°æœåŠ¡æ­£å¸¸è¿è¡Œ
- **è‡ªåŠ¨å›æ»š** - å¥åº·æ£€æŸ¥å¤±è´¥æ—¶åœæ­¢éƒ¨ç½²

## ğŸ› ï¸ æœ¬åœ°æµ‹è¯•

### æµ‹è¯• Docker æ„å»º
```bash
# æœ¬åœ°æ„å»ºæµ‹è¯•
docker build -t giving-app:test .

# è¿è¡Œæµ‹è¯•
docker run -p 3000:3000 giving-app:test
```

### éªŒè¯é…ç½®æ–‡ä»¶
```bash
# æ£€æŸ¥ docker-compose.yml
docker-compose config

# æ£€æŸ¥ GitHub Actions å·¥ä½œæµ
# è®¿é—®: https://github.com/your-username/giving/actions
```

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
- **GitHub Actions**: https://github.com/your-username/giving/actions
- **è…¾è®¯äº‘é•œåƒ**: https://console.cloud.tencent.com/tcr

### æœåŠ¡å™¨æ—¥å¿—
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
cd /opt/giving
./manage.sh logs

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./manage.sh status
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. GitHub Actions å¤±è´¥
```bash
# æ£€æŸ¥ Secrets é…ç½®
# ç¡®ä¿è…¾è®¯äº‘å‡­æ®æ­£ç¡®
# æ£€æŸ¥ SSH å¯†é’¥æ ¼å¼
```

#### 2. Docker æ„å»ºå¤±è´¥
```bash
# æ£€æŸ¥ Dockerfile è¯­æ³•
# éªŒè¯æœ¬åœ°æ„å»º: docker build .
```

#### 3. éƒ¨ç½²å¤±è´¥
```bash
# æ£€æŸ¥æœåŠ¡å™¨ SSH è¿æ¥
# éªŒè¯ docker-compose.yml
# æŸ¥çœ‹æœåŠ¡å™¨é˜²ç«å¢™è®¾ç½®
```

#### 4. å¥åº·æ£€æŸ¥å¤±è´¥
```bash
# æ£€æŸ¥åº”ç”¨æ˜¯å¦æ­£å¸¸å¯åŠ¨
# éªŒè¯æ•°æ®åº“è¿æ¥
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
```

## ğŸ’° è´¹ç”¨è¯´æ˜

### è…¾è®¯äº‘è´¹ç”¨
- **å®¹å™¨é•œåƒæœåŠ¡**ï¼šåŸºç¡€ç‰ˆ Â¥0.02/GB/æœˆ
- **æœåŠ¡å™¨**ï¼šÂ¥60-100/æœˆï¼ˆå·²æœ‰ï¼‰
- **GitHub Actions**ï¼šå…è´¹é¢åº¦è¶³å¤Ÿ

### å…è´¹é¢åº¦
- GitHub Actionsï¼šæ¯æœˆ 2000 åˆ†é’Ÿ
- è…¾è®¯äº‘é•œåƒå­˜å‚¨ï¼š5GB å…è´¹

## ğŸ¯ ä¼˜åŠ¿æ€»ç»“

| ç‰¹æ€§ | æ‰‹åŠ¨éƒ¨ç½² | CI/CD è‡ªåŠ¨åŒ– |
|------|----------|-------------|
| **éƒ¨ç½²é€Ÿåº¦** | 3-5åˆ†é’Ÿ | 2-3åˆ†é’Ÿ |
| **äººå·¥å¹²é¢„** | éœ€è¦æ‰‹åŠ¨ | å…¨è‡ªåŠ¨ |
| **é”™è¯¯ç‡** | ä¸­ç­‰ | ä½ |
| **å¯é‡å¤æ€§** | å·® | ä¼˜ç§€ |
| **ç»´æŠ¤æˆæœ¬** | é«˜ | ä½ |

## ğŸš€ å¼€å§‹ä½¿ç”¨

1. **è®¾ç½®è…¾è®¯äº‘å®¹å™¨æœåŠ¡**
2. **é…ç½® GitHub Secrets**
3. **æ¨é€ä»£ç è§¦å‘è‡ªåŠ¨éƒ¨ç½²**

```bash
git add .
git commit -m "Enable CI/CD pipeline"
git push origin main
```

ç°åœ¨æ¯æ¬¡æ¨é€ä»£ç éƒ½ä¼šè‡ªåŠ¨éƒ¨ç½²ï¼ğŸ‰